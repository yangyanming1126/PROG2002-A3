<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Non-Profit Organization</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
    <nav>
        <ul class="nav-list">
            <li class="nav-item"><a href="/search.html">Search</a></li>
        </ul>
    </nav>
    <div class="header-content">
        <h1>Welcome to Assessment3</h1>
        <p>Here is the content...</p>
    </div>
</header>
<section id="fundraisers"></section>
<footer>
    <p>Â© 2024 YanmingYang ZiqianGu</p>
</footer>

<script>
    // "Execute when the DOM content has fully loaded."
    document.addEventListener('DOMContentLoaded', function() {
        // "Retrieve the DOM element of the fundraisers section."
        const fundraisersSection = document.getElementById('fundraisers');

        // "Call the API to retrieve the fundraising event data."
        fetch('http://localhost:3000/api/fundraisers')
            .then(response => response.json())  // "Convert the returned data to JSON format."
            .then(data => {
                // "Iterate through the data to generate dynamic content."
                data.forEach(fundraiser => {
                    if (fundraiser.ACTIVE === 1) {  // "Only display fundraising events with an active status of 1."
                        const fundraiserElement = document.createElement('div');  // "Create a new `div` container."
                        fundraiserElement.classList.add('fundraiser');  // "Add a class to the `div`."

                        const contentElement = document.createElement('div');
                        contentElement.classList.add('content');
                        contentElement.innerHTML = `
                            <h2>${fundraiser.CAPTION}</h2>
                            <p><strong>Organizer:</strong> ${fundraiser.ORGANIZER}</p>
                            <p><strong>Category:</strong> ${fundraiser.category_name}</p>
                            <p><strong>Target Funding:</strong> $${fundraiser.TARGET_FUNDING}</p>
                            <p><strong>Current Funding:</strong> $${fundraiser.CURRENT_FUNDING}</p>
                            <p><strong>City:</strong> ${fundraiser.CITY}</p>
                        `;
						const imageElement = document.createElement('div');
                        imageElement.classList.add('image');
                        if (fundraiser.FUNDRAISER_ID === 1) {
                            imageElement.style.backgroundImage = `url(./image/3.jpg)`;
                        } else if (fundraiser.FUNDRAISER_ID === 2) {
                            imageElement.style.backgroundImage = `url(./image/5.jpg)`;
                        } else if (fundraiser.FUNDRAISER_ID === 3) {
                            imageElement.style.backgroundImage = `url(./image/4.jpg)`;
                        } else if (fundraiser.FUNDRAISER_ID === 4) {
                            imageElement.style.backgroundImage = `url(./image/2.jpg)`;
                        } else if (fundraiser.FUNDRAISER_ID === 5) {
                            imageElement.style.backgroundImage = `url(./image/1.jpg)`;
                        }
						fundraiserElement.appendChild(contentElement);
                        fundraiserElement.appendChild(imageElement);
                        // "Append the generated content to the fundraisers section."
                        fundraisersSection.appendChild(fundraiserElement);
                    }
                });
            })
            .catch(error => {
                console.error('Error getting fundraising campaign data:', error);  // "Catch and log the error."
            });
    });
</script>

</body>
</html>

